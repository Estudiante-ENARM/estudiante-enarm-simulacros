<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - Estudiante ENARM</title>

  <link rel="icon" type="image/png" href="logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0f172a;
      --panel:#020617;
      --border:rgba(148,163,184,.25);
      --text:#e5e7eb;
      --muted:#9ca3af;
      --primary:#2563eb;
      --primary2:#1d4ed8;
      --danger:#ef4444;
      --card:rgba(148,163,184,.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .hidden{display:none !important;}
    .layout{
      display:grid;
      grid-template-columns: 290px 1fr;
      min-height:100vh;
    }
    header{
      position:sticky; top:0;
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px;
      background:rgba(2,6,23,.85);
      border-bottom:1px solid var(--border);
      backdrop-filter: blur(8px);
      z-index:5;
    }
    .hdr-left{display:flex; align-items:center; gap:10px;}
    .brand{font-weight:600;}
    .hdr-right{display:flex; align-items:center; gap:10px; color:var(--muted); font-size:13px;}
    .btn{
      border:none; border-radius:10px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    .btn-sm{padding:8px 10px; border-radius:9px; font-size:12px;}
    .btn-primary{
      background:linear-gradient(135deg,var(--primary),var(--primary2));
      color:#fff;
    }
    .btn-outline{
      background:transparent;
      color:var(--text);
      border:1px solid var(--border);
    }
    .btn-danger{
      background:rgba(239,68,68,.12);
      color:#fecaca;
      border:1px solid rgba(248,113,113,.35);
    }
    .sidebar{
      background:var(--panel);
      border-right:1px solid var(--border);
      padding:14px;
      overflow:auto;
    }
    .sidebar.open{ /* para móvil */ }
    .sidebar h3{
      margin:10px 0 8px 0;
      font-size:13px;
      color:var(--muted);
      font-weight:600;
      letter-spacing:.2px;
      text-transform:uppercase;
    }
    .nav{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom:14px;
    }
    .sidebar-btn{
      width:100%;
      text-align:left;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(148,163,184,.05);
      color:var(--text);
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    .sidebar-btn--active{
      border-color: rgba(96,165,250,.6);
      box-shadow: 0 0 0 1px rgba(37,99,235,.35);
      background: rgba(37,99,235,.12);
    }
    #admin-sections-list{
      list-style:none;
      padding:0; margin:0;
      display:flex; flex-direction:column;
      gap:8px;
    }
    .sidebar-section-item{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(148,163,184,.05);
      color:var(--text);
      font-size:13px;
    }
    main{
      padding:14px 16px;
    }
    .panel-title{
      margin:0 0 6px 0;
      font-size:16px;
      font-weight:700;
    }
    .panel-subtitle{
      margin:0 0 12px 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }
    .card{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      margin-bottom:12px;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }
    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
    }
    @media (min-width: 900px){
      .grid{grid-template-columns: 1fr 1fr;}
    }
    label{display:block; font-size:12px; color:var(--muted); margin-bottom:6px;}
    input[type="text"], textarea, select{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(148,163,184,.35);
      background:#020617;
      color:var(--text);
      padding:10px 12px;
      font-size:13px;
      outline:none;
    }
    textarea{resize:vertical;}
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    code{color:#c7d2fe}
    .topbar-mobile{
      display:none;
    }
    @media (max-width: 880px){
      .layout{grid-template-columns:1fr;}
      .sidebar{display:none;}
      .sidebar.open{display:block;}
      .topbar-mobile{display:flex;}
    }
  </style>
</head>

<body>

  <header>
    <div class="hdr-left">
      <button id="admin-btn-toggle-sidebar" class="btn btn-outline btn-sm topbar-mobile">☰</button>
      <div class="brand">Panel Admin</div>
    </div>

    <div class="hdr-right">
      <span id="admin-user-email"></span>
      <button id="admin-btn-logout" class="btn btn-danger btn-sm">Salir</button>
    </div>
  </header>

  <div class="layout">
    <aside id="admin-sidebar" class="sidebar">
      <div class="nav">
        <button id="admin-btn-nav-exams" class="sidebar-btn sidebar-btn--active">Exámenes</button>
        <button id="admin-btn-nav-bank" class="sidebar-btn">Banco de preguntas</button>
        <button id="admin-btn-nav-mini" class="sidebar-btn">Mini exámenes</button>
        <button id="admin-btn-nav-users" class="sidebar-btn">Usuarios</button>
        <button id="admin-btn-nav-analytics" class="sidebar-btn">Analytics</button>
        <button id="admin-btn-nav-landing" class="sidebar-btn">Landing</button>
      </div>

      <h3>Secciones</h3>
      <ul id="admin-sections-list"></ul>
    </aside>

    <main>

      <!-- ==================== PANEL: EXAMS ==================== -->
      <section id="admin-panel-exams" class="card">
        <h2 id="admin-current-section-title" class="panel-title">Selecciona una sección</h2>
        <p class="panel-subtitle">Aquí verás los exámenes de la sección seleccionada.</p>

        <div id="admin-exams-list"></div>
      </section>

      <!-- ==================== PANEL: BANK ==================== -->
      <section id="admin-panel-bank" class="card hidden">
        <h2 class="panel-title">Banco de preguntas (colección: <code>questions</code>)</h2>
        <p class="panel-subtitle">
          Filtra por ExamID / especialidad / tema. El buscador de texto es local (sobre <code>caseText</code>).
        </p>

        <div class="grid">
          <div class="card" style="margin:0;">
            <h3 class="panel-title" style="font-size:14px;">Filtros</h3>

            <div class="row">
              <div style="flex:1; min-width:240px;">
                <label>Buscar en caseText</label>
                <input id="admin-bank-search" type="text" placeholder="Ej. apendicitis, preeclampsia..." />
              </div>

              <div style="flex:1; min-width:220px;">
                <label>Tema (topic)</label>
                <input id="admin-bank-topic" type="text" placeholder="Ej. Abdomen agudo" />
              </div>
            </div>

            <div class="row" style="margin-top:10px;">
              <div style="flex:1; min-width:220px;">
                <label>Especialidad</label>
                <input id="admin-bank-specialty" type="text" placeholder="Ej. medicina_interna" />
              </div>

              <div style="flex:1; min-width:220px;">
                <label>ExamID</label>
                <input id="admin-bank-examid" type="text" placeholder="Pega el examId" />
              </div>
            </div>

            <div class="row" style="margin-top:12px;">
              <button id="admin-bank-btn-apply" class="btn btn-primary">Aplicar</button>
              <button id="admin-bank-btn-clear" class="btn btn-outline">Limpiar</button>
              <button id="admin-bank-btn-refresh" class="btn btn-outline">Refrescar</button>
            </div>
          </div>

          <div class="card" style="margin:0;">
            <h3 class="panel-title" style="font-size:14px;">Acciones</h3>
            <p class="panel-subtitle" style="margin-bottom:10px;">
              Selecciona casos y copia a <code>miniQuestions</code>.
            </p>
            <button id="admin-bank-btn-add-to-mini" class="btn btn-primary" disabled>
              Agregar seleccionados a Mini exámenes
            </button>
          </div>
        </div>

        <div class="row" style="justify-content:space-between;margin-top:12px;">
          <div class="panel-subtitle" style="margin:0;">
            Resultados (paginados)
          </div>
          <button id="admin-bank-btn-load-more" class="btn btn-outline btn-sm">Cargar más</button>
        </div>

        <div id="admin-bank-list" style="margin-top:12px;"></div>
      </section>

      <!-- ==================== PANEL: MINI ==================== -->
      <section id="admin-panel-mini" class="card hidden">
        <h2 class="panel-title">Mini exámenes (colección: <code>miniQuestions</code>)</h2>
        <p class="panel-subtitle">Vista rápida del banco global actual.</p>

        <div id="admin-mini-cases"></div>
      </section>

      <!-- ==================== PANEL: USERS ==================== -->
      <section id="admin-panel-users" class="card hidden">
        <h2 class="panel-title">Usuarios</h2>
        <p class="panel-subtitle">Este panel está en blanco aquí para no tocar tu flujo actual. Tu lógica puede llenarlo después.</p>
      </section>

      <!-- ==================== PANEL: ANALYTICS ==================== -->
      <section id="admin-panel-analytics" class="card hidden">
        <h2 class="panel-title">Analytics</h2>
        <p class="panel-subtitle">Este panel está en blanco aquí para no tocar tu flujo actual.</p>
      </section>

      <!-- ==================== PANEL: LANDING ==================== -->
      <section id="admin-panel-landing" class="card hidden">
        <h2 class="panel-title">Landing</h2>
        <p class="panel-subtitle">Este panel está en blanco aquí para no tocar tu flujo actual.</p>
      </section>

    </main>
  </div>

  <!-- Tu lógica va aquí -->
  <script type="module" src="./admin.js"></script>
</body>
</html>
