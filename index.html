<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma ENARM</title>
  <link rel="stylesheet" href="style.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B43LFZV7MR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B43LFZV7MR');
  </script>

  <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){
      if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)
    }(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    try {
      fbq('init', '1146031771035535');
      fbq('track', 'PageView');
    } catch(e){}
  </script>
  <noscript>
    <img height="1" width="1"
      src="https://www.facebook.com/tr?id=1146031771035535&ev=PageView&noscript=1"/>
  </noscript>

</head>

<body>

<div id="app">

  <!-- ========================================================
       SIDEBAR IZQUIERDO (SECCIONES + ACCESO COMPLETO + REDES)
       ======================================================== -->
  <aside id="leftSidebar" class="left-sidebar">

      <div class="brand">
        <img src="./logo.png" class="logo">
        <span class="brand-text">ENARM</span>
      </div>

      <!-- Secciones -->
      <nav id="sectionsList"></nav>

      <!-- Acceso completo -->
      <a id="btnAccesoCompleto"
         class="btn primary"
         target="_blank"
         href="https://wa.me/525515656316?text=Quiero%20el%20acceso%20completo">
        Acceso completo
      </a>

      <!-- Cuenta regresiva -->
      <div id="mainCountdown" class="countdown"></div>

      <!-- Redes sociales -->
      <div class="socials">
        <a id="icon-instagram" target="_blank"><img src="./instagram.png"></a>
        <a id="icon-whatsapp" target="_blank"><img src="./whatsapp.png"></a>
        <a id="icon-telegram" target="_blank"><img src="./telegram.png"></a>
        <a id="icon-tiktok" target="_blank"><img src="./tiktok.png"></a>
      </div>

  </aside>


  <!-- ========================================================
       SIDEBAR DERECHO FLOTANTE (ADMIN)
       ======================================================== -->
  <aside id="adminSidebar" class="admin-sidebar hidden">

      <div class="admin-header">
        <h3>Administrador</h3>
        <button id="closeAdminSidebar" class="btn small">Cerrar</button>
      </div>

      <button id="btnAdminSections" class="btn admin-btn">Secciones</button>
      <button id="btnAdminExams" class="btn admin-btn">Exámenes</button>
      <button id="btnAdminUsers" class="btn admin-btn">Usuarios</button>
      <button id="btnAdminIcons" class="btn admin-btn">Íconos</button>

      <button id="btnLogoutAdmin" class="btn danger" style="margin-top:30px;">
        Cerrar sesión
      </button>

      <div id="adminPanel" class="admin-panel"></div>
  </aside>


  <!-- Botón flotante para abrir el panel admin -->
  <button id="openAdminSidebar" class="admin-fab hidden">Admin</button>


  <!-- ========================================================
       CONTENIDO PRINCIPAL
       ======================================================== -->
  <main id="main">

      <!-- LOGIN -->
      <section id="loginScreen" class="center-card">
        <h2>Acceso</h2>
        <input id="inputEmail" placeholder="Correo electrónico" type="email">
        <input id="inputPassword" placeholder="Contraseña" type="password">

        <div class="login-actions">
          <button id="btnLogin" class="btn primary">Entrar</button>
          <button id="btnCancel" class="btn">Cancelar</button>
        </div>

        <div id="loginMessage" class="muted small"></div>
      </section>


      <!-- LISTADO DE EXÁMENES (vista estudiante y admin) -->
      <section id="examsScreen" class="hidden">
        <h2 id="sectionTitle"></h2>
        <div id="examsList" class="exam-grid"></div>

        <button id="btnAddExam" class="fab-add hidden"> + </button>
      </section>


      <!-- EDITOR DE EXAMEN -->
      <section id="examEditor" class="hidden">
        <h2 id="editorExamTitle"></h2>

        <div id="casesContainer"></div>

        <button id="btnAddCase" class="fab-add small">+</button>

        <button id="btnSaveExam" class="btn primary save-exam">Guardar examen</button>
      </section>


      <!-- EDITOR DE USUARIOS -->
      <section id="usersScreen" class="hidden">
        <h2>Usuarios</h2>
        <button id="btnAddUser" class="btn primary">Agregar usuario</button>
        <div id="usersList"></div>
      </section>


      <!-- EDITOR DE ÍCONOS -->
      <section id="iconsScreen" class="hidden">
        <h2>Íconos Sociales</h2>

        <label>Instagram</label>
        <input id="iconInputInstagram">

        <label>WhatsApp</label>
        <input id="iconInputWhatsapp">

        <label>Telegram</label>
        <input id="iconInputTelegram">

        <label>TikTok</label>
        <input id="iconInputTiktok">

        <button id="btnSaveIcons" class="btn primary" style="margin-top:18px;">
          Guardar íconos
        </button>
      </section>

  </main>

</div>


<!-- Firebase config -->
<script src="firebase.js" type="module"></script>

<!-- App principal -->
<script src="app.js" type="module"></script>

</body>
</html>
