<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estudiantenarm — Simulacros ENARM</title>

  <!-- Meta / SEO -->
  <meta name="description" content="Plataforma de simulacros ENARM - Estudiantenarm" />

  <!-- LINK CSS -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- FAVICON -->
  <link rel="icon" href="assets/logo.png" />

  <!-- NOTE: Analytics & Meta Pixel are injected only si el usuario acepta cookies.
       El snippet existente (Google Analytics + Meta Pixel) se encuentra integrado
       en /js/app.js como la constante ANALYTICS_SNIPPET y se inyectará tras aceptar cookies.
  -->
</head>
<body>
  <div id="app">
    <!-- MOBILE HEADER -->
    <header id="mobile-header" class="hidden">
      <div class="mobile-logo">
        <img id="mobile-logo-img" src="assets/logo.png" alt="logo" />
        <div class="mobile-title">Estudiantenarm</div>
      </div>
      <div>
        <button id="mobile-menu-btn" class="menu-hamburger" aria-label="Abrir menú">
          <img class="menu-icon-btn" src="assets/menu.png" alt="menu" />
        </button>
      </div>
    </header>

    <!-- SIDEBAR -->
    <aside id="sidebar" class="">
      <div id="logo-area">
        <img id="logo-img" src="assets/logo.png" alt="logo" />
        <div class="logo-text">Estudiantenarm</div>
      </div>

      <nav id="main-nav">
        <!-- Initial: login choices -->
        <button class="menu-item" id="btn-user-mode">Usuario</button>
        <button class="menu-item" id="btn-admin-mode">Administrador</button>

        <!-- After login: sections will be rendered here -->
        <div id="sections-container" class="hidden"></div>
      </nav>

      <!-- Countdown -->
      <div id="countdown" style="margin:12px; font-weight:700; text-align:center;">Cargando cronómetro...</div>

      <!-- Access button -->
      <button id="access-full-btn" class="link-btn" style="width:85%; margin:10px auto;">Acceso Completo</button>

      <!-- Social -->
      <div id="social-icons">
        <a class="social-link" id="social-instagram" href="#" target="_blank"><img src="assets/icons/instagram.png" alt="IG" /></a>
        <a class="social-link" id="social-whatsapp" href="#" target="_blank"><img src="assets/icons/whatsapp.png" alt="WA" /></a>
        <a class="social-link" id="social-tiktok" href="#" target="_blank"><img src="assets/icons/tiktok.png" alt="TT" /></a>
        <a class="social-link" id="social-telegram" href="#" target="_blank"><img src="assets/icons/telegram.png" alt="TG" /></a>
      </div>

      <button id="admin-btn" class="hidden">Abrir Admin</button>
    </aside>

    <!-- APP SHELL -->
    <div id="app-shell">
      <main>
        <div class="main-inner">

          <!-- LOGIN PANEL -->
          <div id="login-panel" class="topic">
            <h4>Iniciar sesión</h4>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <div style="flex:1;">
                <label>Email</label>
                <input id="login-email" type="email" style="width:100%; padding:8px; border-radius:8px;" />
              </div>
              <div style="width:220px;">
                <label>Contraseña</label>
                <input id="login-pass" type="password" style="width:100%; padding:8px; border-radius:8px;" />
              </div>
            </div>
            <div style="margin-top:10px; display:flex; gap:8px;">
              <button id="btn-login" class="link-btn">Entrar</button>
              <button id="btn-register" class="edit-btn">Crear cuenta</button>
            </div>
            <p style="margin-top:10px; color:var(--muted); font-size:13px;">Selecciona Usuario o Administrador antes de iniciar.</p>
          </div>

          <!-- EXAM LIST (dynamically populated) -->
          <div id="exam-list" class="hidden"></div>

          <!-- EXAM VIEWER -->
          <div id="exam-viewer" class="hidden">
            <!-- Header with attempts count -->
            <div id="exam-header" style="display:flex; justify-content:space-between; align-items:center;">
              <h3 id="exam-title"></h3>
              <div id="attempts-counter">0 de 3</div>
            </div>

            <div id="questions-container"></div>

            <div style="display:flex; gap:8px; margin-top:14px;">
              <button id="btn-return" class="edit-btn">Regresar</button>
              <button id="btn-finish" class="link-btn">Terminar</button>
            </div>
          </div>

          <!-- Admin modal placeholder -->
          <div id="admin-modal" class="hidden">
            <div class="modal-content">
              <button class="close-modal" id="close-admin-modal">✕</button>
              <div id="admin-content"></div>
            </div>
          </div>

        </div>
      </main>
    </div>

    <!-- Mobile overlay for sidebar -->
    <div id="mobile-overlay" class="hidden"></div>
  </div>

  <!-- Cookie banner placeholder -->
  <div id="cookie-banner" class="hidden" style="position:fixed; bottom:12px; left:12px; right:12px; z-index:9999;">
    <div style="background:var(--card-bg); padding:12px; border-radius:10px; box-shadow:0 8px 24px rgba(2,6,23,0.12); display:flex; justify-content:space-between; align-items:center;">
      <div style="max-width:70%;">Usamos cookies para mejorar tu experiencia y para analytics. ¿Aceptas cargar Google Analytics y Meta Pixel?</div>
      <div style="display:flex; gap:8px;">
        <button id="cookie-decline" class="edit-btn">Rechazar</button>
        <button id="cookie-accept" class="link-btn">Aceptar</button>
      </div>
    </div>
  </div>

  <!-- APP SCRIPT (module) -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
