<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel ADMIN ENARM</title>

  <!-- Google Analytics (deja tu mismo ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B43LFZV7MR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B43LFZV7MR');
  </script>

  <!-- Meta Pixel -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  try{ fbq('init', '1146031771035535'); fbq('track', 'PageView'); } catch(e){ console.warn('fbq init failed', e); }
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1146031771035535&ev=PageView&noscript=1"/>
  </noscript>

  <link rel="stylesheet" href="style.css" />
</head>
<body>

<div class="app">

  <!-- SIDEBAR IZQUIERDA -->
  <aside class="sidebar left-sidebar">
    <div class="brand">
      <img src="./logo.png" class="logo" alt="Logo">
      <div class="brand-text">Admin ENARM</div>
    </div>

    <div class="sidebar-section-title">Secciones</div>
    <nav id="sectionsList" class="sections">
      <!-- Secciones dinámicas -->
    </nav>

    <div class="sidebar-section-title" style="margin-top:16px;">Administración</div>
    <div class="sidebar-admin-actions">
      <button id="btnAddSection" class="btn full">Agregar sección</button>
      <button id="btnViewUsers" class="btn full">Usuarios</button>
    </div>

    <div class="sidebar-footer">
      <div id="mainCountdown" class="countdown"></div>
      <div class="socials">
        <a id="link-instagram" target="_blank"><img src="./instagram.png" alt="Instagram"></a>
        <a id="link-whatsapp" target="_blank"><img src="./whatsapp.png" alt="WhatsApp"></a>
        <a id="link-telegram" target="_blank"><img src="./telegram.png" alt="Telegram"></a>
        <a id="link-tiktok" target="_blank"><img src="./tiktok.png" alt="TikTok"></a>
      </div>
      <button id="btnLogout" class="btn full danger">Cerrar sesión</button>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- TOPBAR -->
    <header class="topbar">
      <div id="userInfo" class="user-info"></div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <section class="screen">

      <!-- LOGIN -->
      <div id="loginScreen" class="card centered">
        <h2>Acceso administrador</h2>
        <input id="inputEmail" type="email" placeholder="Correo electrónico" />
        <input id="inputPassword" type="password" placeholder="Contraseña" />
        <div class="row" style="margin-top:12px;">
          <button id="btnLogin" class="btn primary">Entrar</button>
          <button id="btnCancel" class="btn">Cancelar</button>
        </div>
        <div id="loginMessage" class="small muted" style="margin-top:8px;"></div>
      </div>

      <!-- VISTA: EXÁMENES POR SECCIÓN -->
      <div id="viewExams" class="hidden">
        <div class="view-header">
          <h2 id="sectionTitle">Selecciona una sección</h2>
          <button id="btnAddExam" class="btn primary">Agregar examen</button>
        </div>
        <div id="examsList" class="examsList"></div>
      </div>

      <!-- VISTA: EDITOR DE EXAMEN (CASOS + PREGUNTAS) -->
      <div id="viewExamEditor" class="hidden">
        <div class="view-header">
          <div>
            <h2 id="examEditorTitle">Examen</h2>
            <div id="examEditorSubtitle" class="small muted"></div>
          </div>
          <div class="view-header-actions">
            <button id="btnEditExamInfo" class="btn">Editar datos examen</button>
            <button id="btnAddCase" class="btn primary">Agregar caso clínico</button>
            <button id="btnBackToExams" class="btn">Volver a exámenes</button>
          </div>
        </div>
        <div id="casesList"></div>
      </div>

      <!-- VISTA: USUARIOS -->
      <div id="viewUsers" class="hidden">
        <div class="view-header">
          <h2>Usuarios</h2>
          <button id="btnAddUser" class="btn primary">Agregar usuario (solo Firestore)</button>
        </div>
        <div id="usersList"></div>
      </div>

    </section>
  </main>

</div>

<script type="module" src="app.js"></script>
</body>
</html>
