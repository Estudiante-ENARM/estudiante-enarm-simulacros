<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estudiantenarm — Simulacros ENARM</title>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B43LFZV7MR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B43LFZV7MR');
</script>

<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1146031771035535');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1146031771035535&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->

  <!-- Primary stylesheet -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- Icons -->
  <link rel="icon" href="assets/logo.png" />

  <!-- Firebase config (loaded later via firebase-config.js) -->
</head>
<body>
  <div id="app">
    <!-- MOBILE HEADER -->
    <header id="mobile-header" class="hidden">
      <div class="mobile-logo">
        <img id="mobile-logo-img" src="assets/logo.png" alt="logo" />
        <div class="mobile-title">Estudiantenarm</div>
      </div>
      <div>
        <button id="mobile-menu-btn" class="menu-hamburger" aria-label="Abrir menú">
          <img class="menu-icon-btn" src="assets/menu.png" alt="menu" />
        </button>
      </div>
    </header>

    <!-- SIDEBAR -->
    <aside id="sidebar" class="">
      <div id="logo-area">
        <img id="logo-img" src="assets/logo.png" alt="logo" />
        <div class="logo-text">Estudiantenarm</div>
      </div>

      <nav id="main-nav">
        <!-- Initial: login choices -->
        <button class="menu-item" id="btn-user-mode">Usuario</button>
        <button class="menu-item" id="btn-admin-mode">Administrador</button>

        <!-- After login: sections will be rendered here -->
        <div id="sections-container" class="hidden"></div>
      </nav>

      <!-- Countdown -->
      <div id="countdown" style="margin:12px; font-weight:700; text-align:center;">Cargando cronómetro...</div>

      <!-- Access button -->
      <button id="access-full-btn" class="link-btn" style="width:85%; margin:10px auto;">Acceso Completo</button>

      <!-- Social -->
      <div id="social-icons">
        <a class="social-link" id="social-instagram" href="#" target="_blank"><img src="assets/icons/instagram.png" alt="IG" /></a>
        <a class="social-link" id="social-whatsapp" href="#" target="_blank"><img src="assets/icons/whatsapp.png" alt="WA" /></a>
        <a class="social-link" id="social-tiktok" href="#" target="_blank"><img src="assets/icons/tiktok.png" alt="TT" /></a>
        <a class="social-link" id="social-telegram" href="#" target="_blank"><img src="assets/icons/telegram.png" alt="TG" /></a>
      </div>

      <button id="admin-btn" class="hidden">Abrir Admin</button>
    </aside>

    <!-- APP SHELL -->
    <div id="app-shell">
      <main>
        <div class="main-inner">

          <!-- LOGIN PANEL -->
          <div id="login-panel" class="topic">
            <h4>Iniciar sesión</h4>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <div style="flex:1;">
                <label>Email</label>
                <input id="login-email" type="email" style="width:100%; padding:8px; border-radius:8px;" />
              </div>
              <div style="width:220px;">
                <label>Contraseña</label>
                <input id="login-pass" type="password" style="width:100%; padding:8px; border-radius:8px;" />
              </div>
            </div>
            <div style="margin-top:10px; display:flex; gap:8px;">
              <button id="btn-login" class="link-btn">Entrar</button>
              <button id="btn-register" class="edit-btn">Crear cuenta</button>
            </div>
            <p style="margin-top:10px; color:var(--muted); font-size:13px;">Selecciona Usuario o Administrador antes de iniciar.</p>
          </div>

          <!-- EXAM LIST (dynamically populated) -->
          <div id="exam-list" class="hidden"></div>

          <!-- EXAM VIEWER -->
          <div id="exam-viewer" class="hidden">
            <!-- Header with attempts count -->
            <div id="exam-header" style="display:flex; justify-content:space-between; align-items:center;">
              <h3 id="exam-title"></h3>
              <div id="attempts-counter">0 de 3</div>
            </div>

            <div id="questions-container"></div>

            <div style="display:flex; gap:8px; margin-top:14px;">
              <button id="btn-return" class="edit-btn">Regresar</button>
              <button id="btn-finish" class="link-btn">Terminar</button>
            </div>
          </div>

          <!-- Admin modal placeholder -->
          <div id="admin-modal" class="hidden">
            <div class="modal-content">
              <button class="close-modal" id="close-admin-modal">✕</button>
              <div id="admin-content"></div>
            </div>
          </div>

        </div>
      </main>
    </div>

    <!-- Mobile overlay for sidebar -->
    <div id="mobile-overlay" class="hidden"></div>
  </div>

  <!-- Cookie banner placeholder -->
  <div id="cookie-banner" class="hidden" style="position:fixed; bottom:12px; left:12px; right:12px; z-index:9999;">
    <div style="background:var(--card-bg); padding:12px; border-radius:10px; box-shadow:0 8px 24px rgba(2,6,23,0.12); display:flex; justify-content:space-between; align-items:center;">
      <div style="max-width:70%;">Usamos cookies para mejorar tu experiencia y para analytics. ¿Aceptas cargar Google Analytics y Meta Pixel?</div>
      <div style="display:flex; gap:8px;">
        <button id="cookie-decline" class="edit-btn">Rechazar</button>
        <button id="cookie-accept" class="link-btn">Aceptar</button>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="js/firebase-config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/exams.js"></script>
  <script src="js/admin.js"></script>
  <script>
    // entry point UI init
    document.addEventListener('DOMContentLoaded', () => {
      AppUI.init();
    });
  </script>
  <!-- End of body content -->
  <!-- NOTE: Google Analytics / Meta Pixel file saved at: /mnt/data/Google Analytics y pixel meta.txt -->
  <!-- The cookie banner logic will insert the contents of that file after acceptance. -->

  <!-- Optional: quick inline script to set countdown date -->
  <script>
    // default countdown date (you can update via settings in Firestore)
    const DEFAULT_COUNTDOWN = new Date('2026-09-23T09:00:00-06:00'); // adjust timezone if needed
    window.__APP_CONFIG = {
      countdownDate: DEFAULT_COUNTDOWN.toISOString()
    };
  </script>
</body>
</html>
