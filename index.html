<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Estudiante ENARM - Admin</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B43LFZV7MR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B43LFZV7MR');
  </script>

  <!-- Meta Pixel -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  try{ fbq('init', '1146031771035535'); fbq('track', 'PageView'); } catch(e){ console.warn('fbq init failed', e); }
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1146031771035535&ev=PageView&noscript=1"/>
  </noscript>

  <link rel="stylesheet" href="style.css" />
</head>

<body>

<div class="app">

  <!-- SIDEBAR IZQUIERDA -->
  <aside class="left-sidebar">
    <div class="brand">
      <img src="./logo.png" alt="Logo" class="logo">
      <div class="brand-text">Estudiante ENARM</div>
    </div>

    <div class="sidebar-block">
      <div class="sidebar-title">Secciones</div>
      <nav id="sectionsList" class="sections"></nav>
      <button id="btnAddSection" class="btn-sidebar">+ Nueva sección</button>
    </div>

    <div class="sidebar-block">
      <div class="sidebar-title">Administración</div>
      <button id="btnViewExams" class="btn-sidebar active">Exámenes</button>
      <button id="btnViewUsers" class="btn-sidebar">Usuarios</button>
    </div>

    <div class="sidebar-footer">
      <button id="btnLogoutSide" class="btn-sidebar danger hidden">Cerrar sesión</button>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- TOPBAR -->
    <header class="topbar">
      <div id="userInfo" class="user-info"></div>
      <div id="topbarActions" class="topbar-actions"></div>
    </header>

    <!-- LOGIN -->
    <section id="screenLogin" class="screen">
      <div class="card login-card">
        <h2>Acceso administrador</h2>
        <label for="inputEmail">Correo electrónico</label>
        <input id="inputEmail" type="email" placeholder="correo@ejemplo.com" />
        <label for="inputPassword">Contraseña</label>
        <input id="inputPassword" type="password" placeholder="Contraseña" />

        <div class="row login-buttons">
          <button id="btnLogin" class="btn primary">Entrar</button>
          <button id="btnCancel" class="btn">Cancelar</button>
        </div>

        <div id="loginMessage" class="small muted" style="margin-top:8px;"></div>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="screenAdmin" class="screen hidden">
      <!-- barra superior admin -->
      <div class="admin-toolbar">
        <div id="currentSectionName" class="admin-section-name">
          Selecciona una sección
        </div>
        <div class="admin-toolbar-actions">
          <button id="btnToggleNewExam" class="btn primary hidden">
            Nuevo examen
          </button>
        </div>
      </div>

      <!-- VISTA EXÁMENES -->
      <div id="viewExams" class="admin-view">
        <!-- Panel para crear nuevo examen -->
        <div id="newExamPanel" class="card new-exam-card hidden">
          <h3>Nuevo examen</h3>
          <label for="newExamTitle">Título del examen</label>
          <input id="newExamTitle" type="text" />

          <label for="newExamDescription">Descripción</label>
          <textarea id="newExamDescription" rows="2"></textarea>

          <div class="row" style="margin-top:10px;">
            <button id="btnCreateExam" class="btn primary">Guardar examen</button>
            <button id="btnCancelNewExam" class="btn">Cancelar</button>
          </div>
          <div class="small muted" style="margin-top:6px;">
            El tiempo del examen se calculará automáticamente según el número de preguntas (75 s por pregunta).
          </div>
        </div>

        <!-- Lista de exámenes -->
        <div id="examsList" class="examsList"></div>
      </div>

      <!-- VISTA EDITOR DE UN EXAMEN -->
      <div id="viewExamEditor" class="admin-view hidden">
        <!-- El contenido se genera completamente desde app.js -->
      </div>

      <!-- VISTA USUARIOS -->
      <div id="viewUsers" class="admin-view hidden">
        <!-- El contenido se genera desde app.js -->
      </div>
    </section>
  </main>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
